<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Testing With Jest</title>
        <link rel="stylesheet" href="./css/reveal.css">
        <link rel="stylesheet" href="./css/theme/black.css" id="theme">
        <link rel="stylesheet" href="./css/highlight/zenburn.css">
        <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print">

    </head>
    <body>

        <div class="reveal">
            <div class="slides"><section ><section data-markdown><script type="text/template">

# Testing With Jest üÉè

- Nastaven√≠
- Z√°kladn√≠ API
- Watch Mode
- Mockov√°n√≠
- Snapshot testing
</script></section><section data-markdown><script type="text/template">
[github.com/jnv/jest-demo](https://github.com/jnv/jest-demo)
</script></section></section><section  data-markdown><script type="text/template">
```
npm i --save-dev jest
```
</script></section><section ><section data-markdown><script type="text/template">
## Jmenn√© konvence

- Adres√°≈ô: `__tests__`
- Soubory: `*.test.js(x)`
</script></section><section data-markdown><script type="text/template">
## Konfigurace

- `package.json` nebo `jest.config.js`
- U≈æiteƒçn√© volby:
  - [`modulePaths`](https://facebook.github.io/jest/docs/en/configuration.html#modulepaths-array-string)
  - [`clearMocks`](https://facebook.github.io/jest/docs/en/configuration.html#clearmocks-boolean)

<small>https://facebook.github.io/jest/docs/en/configuration.html</small>
</script></section></section><section ><section data-markdown><script type="text/template">
# API

```js
describe('sum', () => {
  test('adds 1 + 2 to equal 3', () => {
    expect(sum(1, 2)).toBe(3)
  })
})
```

<small>https://facebook.github.io/jest/docs/en/expect.html</small>
</script></section><section data-markdown><script type="text/template">
```js
// Chai
expect(foo).to.equal('bar')

// Jest
expect(foo).toEqual('bar')
// nebo
expect(foo).toBe('bar')
```
</script></section><section data-markdown><script type="text/template">
### Hooks

- `beforeAll`, `afterAll`
- `beforeEach`, `afterEach`
- Izolace test≈Ø

<small>https://facebook.github.io/jest/docs/en/api.html</small>

</script></section></section><section  data-markdown><script type="text/template">
# Watch Mode

```sh
# ./node_modules/.bin/jest --watch

npx jest --watch
```

<small>[Jest 19: Immersive Watch Mode](http://facebook.github.io/jest/blog/2017/02/21/jest-19-immersive-watch-mode-test-platform-improvements.html)</small>
</script></section><section ><section data-markdown><script type="text/template">
# Mockov√°n√≠

- adres√°≈ô `__mocks__`
- `jest.mock('cesta-k-modulu')`
- `require.requireMock('cesta-k-modulu)`
</script></section><section data-markdown><script type="text/template">
# `jest.fn()`

```js
const mocked = jest.fn().mockImplementation((arg) => ...)

expect(mocked).toHaveBeenCalledWith('some arg')
```

<small>https://facebook.github.io/jest/docs/en/mock-function-api.html</small>
</script></section></section><section ><section data-markdown><script type="text/template">
# Snapshot Testing

```js
expect(result).toMatchSnapshot()
```

`jest -u` aktualizuje snapshoty

<small>http://facebook.github.io/jest/docs/en/snapshot-testing.html</small>
</script></section><section data-markdown><script type="text/template">
## Snaphoty v Mocha / Chai

- https://github.com/bahmutov/snap-shot-it
- https://github.com/wellguimaraes/mocha-snapshots
- https://github.com/suchipi/chai-jest-snapshot
- https://github.com/marvinhagemeister/chai-snapshot-tests</script></section></section></div>
        </div>

        <script src="./lib/js/head.min.js"></script>
        <script src="./js/reveal.js"></script>

        <script>
            function extend() {
              var target = {};
              for (var i = 0; i < arguments.length; i++) {
                var source = arguments[i];
                for (var key in source) {
                  if (source.hasOwnProperty(key)) {
                    target[key] = source[key];
                  }
                }
              }
              return target;
            }

            // Optional libraries used to extend on reveal.js
            var deps = [
              { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
              { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
              { src: './plugin/zoom-js/zoom.js', async: true },
              { src: './plugin/notes/notes.js', async: true },
              { src: './plugin/math/math.js', async: true }
            ];

            // default options to init reveal.js
            var defaultOptions = {
              controls: true,
              progress: true,
              history: true,
              center: true,
              transition: 'default', // none/fade/slide/convex/concave/zoom
              dependencies: deps
            };

            // options from URL query string
            var queryOptions = Reveal.getQueryHash() || {};

            var options = {};
            options = extend(defaultOptions, options, queryOptions);
        </script>


        <script>
            Reveal.initialize(options);
        </script>
    </body>
</html>
